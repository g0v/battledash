ldc.register("ldcvmgr",[],function(){var e,t,r,n=this;return e=function(e,r){return null==e&&(e=""),null==r&&(r={}),"error"===e?alert("something is wrong; please reload and try again"):t.toggle("error"),console.log(r.message||r)},t={loader:new ldLoader({className:"ldld full",autoZ:!0}),covers:r={},prepare:function(e){var t=this;return this.covers[e]?Promise.resolve():(this.loader.on(1e3),fetch("/modules/cover/"+e+".html").then(function(t){if(!t||!t.ok)throw new Error("modal '"+(e||"<no-name>")+"' load failed.");return t.text()}).then(function(r){var n,o;return document.body.appendChild(n=document.createElement("div")),n.innerHTML=r,ld$.find(n,"script").map(function(e){var t;return t=ld$.create({name:"script",attr:{type:"text/javascript"}}),t.text=e.textContent,e.parentNode.replaceChild(t,e)}),o=n.querySelector(".ldcv"),t.covers[e]=new ldCover({root:o,lock:"true"===o.getAttribute("data-lock")}),debounce(1)}).finally(function(){return t.loader.cancel()}).catch(function(e){throw e}))},purge:function(e){var t,r;return null!=e?(r=(t=this.covers)[e],delete t[e],r):this.covers={}},toggle:function(t,r,n){var o=this;return this.prepare(t).then(function(){return o.covers[t].toggle(r)}).then(function(){return ldc.fire("ldcvmgr."+t+"."+(o.covers[t].isOn()?"on":"off"),{node:o.covers[t],param:n})}).catch(function(r){return e(t,r)})},getcover:function(e){var t=this;return this.prepare(e).then(function(){return t.covers[e]})},getdom:function(e){var t=this;return this.prepare(e).then(function(){return t.covers[e].root})},isOn:function(e){return this.covers[e]&&this.covers[e].isOn()},set:function(e,t){var r=this;return this.prepare(e).then(function(){return r.covers[e].set(t)})},get:function(t,r){var n=this;return this.prepare(t).then(function(){return ldc.fire("ldcvmgr."+t+".on",{node:n.covers[t],param:r})}).then(function(){return n.covers[t].get()}).catch(function(r){return e(t,r)})}},Array.from(document.querySelectorAll(".ldcvmgr")).map(function(e){var t;if((t=e.getAttribute("data-name"))&&!r[t])return r[t]=new ldCover({root:e,lock:"true"===e.getAttribute("data-lock")})}),Array.from(document.querySelectorAll("[data-ldcv-toggle]")).map(function(e){var t;if(t=e.getAttribute("data-ldcv-toggle"))return e.addEventListener("click",function(){return n.toggle(t)})}),ldc.action({toggle:function(e,r){return t.toggle(e,r)},purge:function(e){return t.purge(e)},get:function(e,r){return t.get(e,r)}}),t});